# 音频录制器 Chrome 插件

## 功能说明

这个Chrome插件可以从视频中录制音频，并在视频播放完成后保存为音频文件。

## 主要功能

- ✅ 自动检测页面中的视频元素
- ✅ 视频播放时自动开始录制音频
- ✅ 视频播放完成后自动停止录制并保存
- ✅ 支持手动控制录制（开始/停止）
- ✅ 自动将录制的音频转换为WAV格式（可进一步转换为MP3）
- ✅ 显示录制状态和通知

## 安装方法

1. 打开Chrome浏览器，进入扩展程序管理页面：`chrome://extensions/`
2. 开启"开发者模式"（右上角开关）
3. 点击"加载已解压的扩展程序"
4. 选择 `音频保存` 文件夹
5. 插件安装完成

## 使用方法

### 自动录制模式（推荐）

1. 打开包含视频的网页（Bilibili）
2. 插件会自动检测视频元素
3. 当视频开始播放时，插件会自动开始录制
4. 视频播放完成后，插件会自动停止录制并弹出保存对话框
5. 选择保存位置，文件将保存为WAV格式

### 手动控制模式

1. 点击浏览器工具栏中的插件图标
2. 在弹出窗口中点击"开始录制"按钮
3. 录制过程中可以随时点击"停止录制"
4. 停止后会自动弹出保存对话框

## 文件格式说明

- **默认格式**：WAV（未压缩，高质量）
- **原因**：浏览器原生不支持MP3编码
- **转换为MP3**：可以使用以下工具将WAV转换为MP3：
  - 在线工具：CloudConvert、Online-Convert等
  - 桌面软件：Audacity、FFmpeg等

## 注意事项

1. 插件需要访问所有网站权限才能正常工作
2. 某些网站可能有CORS限制，可能无法录制
3. 录制的音频质量取决于视频源的音频质量
4. 如果页面中有多个视频，插件会录制第一个检测到的视频
5. 如果视频是动态加载的，插件会定期检查并自动连接

## 技术说明

- 使用Web Audio API捕获音频流
- 使用MediaRecorder API录制音频
- 自动转换为WAV格式以便后续处理
- 支持Chrome Manifest V3

## 故障排除

### 问题：未检测到视频元素
- 确保页面中确实有`<video>`标签
- 刷新页面后重试
- 某些网站可能使用自定义视频播放器，可能无法检测

### 问题：录制失败
- 检查浏览器控制台是否有错误信息
- 确保网站允许音频捕获
- 尝试手动点击"开始录制"按钮

### 问题：文件无法下载
- 检查浏览器下载权限设置
- 确保有足够的磁盘空间
- 尝试使用其他浏览器

## 开发信息

- Manifest Version: 3
- 支持浏览器：Chrome、Edge（Chromium内核）
